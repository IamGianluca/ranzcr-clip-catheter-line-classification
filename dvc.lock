download_data:
  cmd: kaggle competitions download -c ranzcr-clip-catheter-line-classification -p
    data/
  outs:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
unzip_train_img:
  cmd: unzip data/ranzcr-clip-catheter-line-classification.zip 'train/*' -d 'data/'
  deps:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
  outs:
  - path: data/train/
    md5: 5571d6d885d1e550ac890552afb255f0.dir
    size: 6912613778
    nfiles: 30083
unzip_test_img:
  cmd: unzip data/ranzcr-clip-catheter-line-classification.zip 'test/*' -d 'data/'
  deps:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
  outs:
  - path: data/test/
    md5: ac6babfae020e79d81c0cd2ed33b7bd6.dir
    size: 844745721
    nfiles: 3583
unzip_train_labels:
  cmd: unzip data/ranzcr-clip-catheter-line-classification.zip 'train.csv' -d 'data/'
  deps:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
  outs:
  - path: data/train.csv
    md5: f9305cb1f8dbb233c78385f20ab3ae72
    size: 2918266
unzip_train_annotations:
  cmd: unzip data/ranzcr-clip-catheter-line-classification.zip 'train_annotations.csv'
    -d 'data/'
  deps:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
  outs:
  - path: data/train_annotations.csv
    md5: 00ad55b088b2f81c756a6b21bc8f2562
    size: 4950273
create_folds:
  cmd: python pipe/create_folds.py
  deps:
  - path: data/train.csv
    md5: f9305cb1f8dbb233c78385f20ab3ae72
    size: 2918266
  - path: pipe/create_folds.py
    md5: 78d346827bae71e4e2057bf148f94038
    size: 723
  outs:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
unzip_sample_submission:
  cmd: unzip data/ranzcr-clip-catheter-line-classification.zip 'sample_submission.csv'
    -d 'data/'
  deps:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
  outs:
  - path: data/sample_submission.csv
    md5: 3bf8eb33a1a25f1f79940d019c18ebbc
    size: 311839
resize_images:
  cmd: python pipe/resize_images.py
  deps:
  - path: data/test/
    md5: ac6babfae020e79d81c0cd2ed33b7bd6.dir
    size: 844745721
    nfiles: 3583
  - path: data/train/
    md5: 5571d6d885d1e550ac890552afb255f0.dir
    size: 6912613778
    nfiles: 30083
  outs:
  - path: data/test_1024/
    md5: 29b494965aebb0664b74e29f3e345473.dir
    size: 214944270
    nfiles: 3582
  - path: data/test_128/
    md5: 105566336a8298b416d0ef82e347051d.dir
    size: 8846772
    nfiles: 3582
  - path: data/test_192/
    md5: 7872b7646f388e9b08695138794c757a.dir
    size: 15818222
    nfiles: 3582
  - path: data/test_256/
    md5: 0a364a5a19354e2080a27411a6996ab5.dir
    size: 24363993
    nfiles: 3582
  - path: data/test_384/
    md5: 85def42fb4ea189dc50f2950f3b88965.dir
    size: 45232275
    nfiles: 3582
  - path: data/test_512/
    md5: 829fb8073ab10e5ace5d6d05253387b3.dir
    size: 70444379
    nfiles: 3582
  - path: data/test_768/
    md5: 9275cfb3acc8651983a9eb43ca03b174.dir
    size: 133274447
    nfiles: 3582
  - path: data/train_1024/
    md5: 2f49375e6e8e87e1fab5c5075d63b582.dir
    size: 1773270872
    nfiles: 30083
  - path: data/train_128/
    md5: 569de16f618eff737a4f2a8d3e70eec0.dir
    size: 72692224
    nfiles: 30083
  - path: data/train_192/
    md5: c480a05f5643a38909ccad7f71000599.dir
    size: 130326145
    nfiles: 30083
  - path: data/train_256/
    md5: e14002093f230017b4cc1810a53f0328.dir
    size: 201194414
    nfiles: 30083
  - path: data/train_384/
    md5: 142193318e2adfddd4fb6f8551589009.dir
    size: 374049179
    nfiles: 30083
  - path: data/train_512/
    md5: 088e837dc33da0b21e3f57644c085037.dir
    size: 582432616
    nfiles: 30083
  - path: data/train_768/
    md5: 8695f5a4249f99244a4c8c14e15eac0a.dir
    size: 1100286799
    nfiles: 30083
train_modlel_02:
  cmd: python pipe/train.py --fold 0 --epochs 20 --arch resnet34 --metric multilabel_auc_macro
    --opt adam --loss bce_with_logits --precision 16 --sz 128 --bs 512  --lr 0.02
    --wd 0.02 --mom 0.9
  deps:
  - path: data/train_folds.csv
    md5: c0a7355a820dd5f371ba3ffb54eeecd0
    size: 2978438
  - path: pipe/train.py
    md5: 07a367a146265f74db1e04c9d0a0d049
    size: 4289
  outs:
  - path: models/arch=resnet34_sz=128_fold=0.ckpt
    md5: 58672e048799379a17223652040325fd
    size: 85284057
  - path: subs/oof/arch=resnet34_sz=128_fold=0.csv
    md5: 125c6c3ae07a99c6d53e0830d10d2e2e
    size: 986208
train_resnet18_128:
  cmd: python pipe/train.py --train_data train_128 --test_data test_128 --fold -1
    --epochs 15 --arch resnet18 --sz 128 --batch_size 128 --lr 1 --sched onecycle
  deps:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
  - path: pipe/train.py
    md5: 97ab92d24da766cb621b43d4749ec8c8
    size: 7224
  outs:
  - path: metrics/arch=resnet18_sz=128.metric
    md5: 7bcf15542cdad828d84e9599c7ade131
    size: 31
  - path: models/arch=resnet18_sz=128_fold=0.ckpt
    md5: 46aa12b11a82742582fae117d884a905
    size: 44787577
  - path: models/arch=resnet18_sz=128_fold=1.ckpt
    md5: f4e19048fcc7fcf50fb511687a443809
    size: 44787577
  - path: models/arch=resnet18_sz=128_fold=2.ckpt
    md5: 0858736c625e9f6fbd0f943ba4904525
    size: 44787577
  - path: models/arch=resnet18_sz=128_fold=3.ckpt
    md5: d137095a15681c98d5ee9942b89ae267
    size: 44787577
  - path: models/arch=resnet18_sz=128_fold=4.ckpt
    md5: 8f4e693ba19a39e117e911f27af641f6
    size: 44787577
  - path: subs/arch=resnet18_sz=128_fold=0.csv
    md5: 2304ef549417a8da5b4509222bae6e75
    size: 991810
  - path: subs/arch=resnet18_sz=128_fold=1.csv
    md5: ee4351150d41f400168c63c832c03013
    size: 992465
  - path: subs/arch=resnet18_sz=128_fold=2.csv
    md5: b8e9ef5295f3b218a11a5c1285b72834
    size: 991429
  - path: subs/arch=resnet18_sz=128_fold=3.csv
    md5: eba8bd1d2d66cef8e7ceb86a7f184853
    size: 990511
  - path: subs/arch=resnet18_sz=128_fold=4.csv
    md5: f4a6f56058c1fea758d52d73ab36c1c4
    size: 992614
  - path: subs/oof/arch=resnet18_sz=128_fold=0.csv
    md5: 8f3e3332a5d17555434c6dd7234b28f2
    size: 1678289
  - path: subs/oof/arch=resnet18_sz=128_fold=1.csv
    md5: 0624c9d8df80276f9539bcd207e24a3c
    size: 1677789
  - path: subs/oof/arch=resnet18_sz=128_fold=2.csv
    md5: b0e9f5126190de7a76e692254a6e5c61
    size: 1679848
  - path: subs/oof/arch=resnet18_sz=128_fold=3.csv
    md5: 69b8bb1f85d414608c837fed10b19e78
    size: 1677052
  - path: subs/oof/arch=resnet18_sz=128_fold=4.csv
    md5: 0ae9f9a2fd196d4be26ed6c17c3bcdd6
    size: 1678190
train_resnet34_128:
  cmd: python pipe/train.py --train_data train_128 --test_data test_128 --fold -1
    --epochs 15 --arch resnet34 --sz 128 --batch_size 128 --lr 1 --sched onecycle
  deps:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
  - path: pipe/train.py
    md5: 97ab92d24da766cb621b43d4749ec8c8
    size: 7224
  outs:
  - path: metrics/arch=resnet34_sz=128.metric
    md5: 8fbcff939ab003b3abf2c944fc3c6855
    size: 31
  - path: models/arch=resnet34_sz=128_fold=0.ckpt
    md5: f37fa693e75a2ef73f1d7dee75742a3c
    size: 85284057
  - path: models/arch=resnet34_sz=128_fold=1.ckpt
    md5: 574f6592b5732f4bb48c1ed8a396b8b2
    size: 85284057
  - path: models/arch=resnet34_sz=128_fold=2.ckpt
    md5: a6c19b50fecbdcb1782c0d6d9879d7b6
    size: 85284057
  - path: models/arch=resnet34_sz=128_fold=3.ckpt
    md5: 3705329856bf56f300c653ca77008182
    size: 85284057
  - path: models/arch=resnet34_sz=128_fold=4.ckpt
    md5: 5a7330dbb3aba231499d82a7319394f1
    size: 85284057
  - path: subs/arch=resnet34_sz=128_fold=0.csv
    md5: 9417b6b9f18259555b3bea2e64dee00c
    size: 991944
  - path: subs/arch=resnet34_sz=128_fold=1.csv
    md5: 29d3022e059b0a9a03eb2e32b0c2b7a9
    size: 991081
  - path: subs/arch=resnet34_sz=128_fold=2.csv
    md5: e7f101d507a4bd643e3d9cc66bcb8264
    size: 989815
  - path: subs/arch=resnet34_sz=128_fold=3.csv
    md5: 099d01f240752461f62d3863646603b7
    size: 990465
  - path: subs/arch=resnet34_sz=128_fold=4.csv
    md5: 02bfa9b8a85f93057eb24652fd807e1e
    size: 991009
  - path: subs/oof/arch=resnet34_sz=128_fold=0.csv
    md5: 0071631eb2eca799b49d260592f65b9d
    size: 1678933
  - path: subs/oof/arch=resnet34_sz=128_fold=1.csv
    md5: 8ad9ca5c7a52914531bbaa88c5cb1656
    size: 1677266
  - path: subs/oof/arch=resnet34_sz=128_fold=2.csv
    md5: e43f68c918da0ef3bc0a88463f8baa9f
    size: 1677893
  - path: subs/oof/arch=resnet34_sz=128_fold=3.csv
    md5: e12341bce46b2aab948c2f3ac2299aca
    size: 1679478
  - path: subs/oof/arch=resnet34_sz=128_fold=4.csv
    md5: 1473107b4b072008ea122df49cef27c5
    size: 1677002
train_resnet50_128:
  cmd: python pipe/train.py --train_data train_128 --test_data test_128 --fold -1
    --epochs 15 --arch resnet50 --sz 128 --batch_size 128 --lr 1 --sched onecycle
  deps:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
  - path: pipe/train.py
    md5: 97ab92d24da766cb621b43d4749ec8c8
    size: 7224
  outs:
  - path: metrics/arch=resnet50_sz=128.metric
    md5: da6d582c6b2da17664710616d2cb9448
    size: 31
  - path: models/arch=resnet50_sz=128_fold=0.ckpt
    md5: 188b2b5b71b0bea01647fed1cfd6ea48
    size: 94425647
  - path: models/arch=resnet50_sz=128_fold=1.ckpt
    md5: 36395c2386abf134a8aa451aaea0d0d0
    size: 94425647
  - path: models/arch=resnet50_sz=128_fold=2.ckpt
    md5: 108650a94d9f0060e212a615db46326f
    size: 94425647
  - path: models/arch=resnet50_sz=128_fold=3.ckpt
    md5: 5e3731c65b0c1e521f6f588e8862b8ab
    size: 94425647
  - path: models/arch=resnet50_sz=128_fold=4.ckpt
    md5: 62c3510d72653ce84d0c953f6f4ffedb
    size: 94425647
  - path: subs/arch=resnet50_sz=128_fold=0.csv
    md5: 3acf19864b39df060df0822d39960985
    size: 989700
  - path: subs/arch=resnet50_sz=128_fold=1.csv
    md5: 9a46b7aa3fc18481e782ff048274292a
    size: 991393
  - path: subs/arch=resnet50_sz=128_fold=2.csv
    md5: a1e1373655c38a6b6812fada44ad25a8
    size: 994491
  - path: subs/arch=resnet50_sz=128_fold=3.csv
    md5: 5ceedcc50163fafb20803aa800a1ae34
    size: 990590
  - path: subs/arch=resnet50_sz=128_fold=4.csv
    md5: 89c0433202169d6d65d7f2f54f7e032f
    size: 989975
  - path: subs/oof/arch=resnet50_sz=128_fold=0.csv
    md5: b07199dff5c31dad3a527c7c2a1dc643
    size: 1675007
  - path: subs/oof/arch=resnet50_sz=128_fold=1.csv
    md5: 5f9dd80e9a963c641cd3f98a66a1d15e
    size: 1677014
  - path: subs/oof/arch=resnet50_sz=128_fold=2.csv
    md5: 09eea9956ed72396961541a0b6b0ff92
    size: 1685322
  - path: subs/oof/arch=resnet50_sz=128_fold=3.csv
    md5: 987b516d46566943bf59ff1f04c2467c
    size: 1678375
  - path: subs/oof/arch=resnet50_sz=128_fold=4.csv
    md5: 30b3b45a9b2c0c2eb45428c1283d366f
    size: 1675072
train_resnet18_256:
  cmd: python pipe/train.py --train_data train_256 --test_data test_256 --fold -1
    --epochs 15 --arch resnet18 --sz 256 --batch_size 128 --lr 1 --sched onecycle
  deps:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
  - path: pipe/train.py
    md5: 97ab92d24da766cb621b43d4749ec8c8
    size: 7224
  outs:
  - path: metrics/arch=resnet18_sz=256.metric
    md5: 200784b2c007da87dad50f7d46c73b48
    size: 31
  - path: models/arch=resnet18_sz=256_fold=0.ckpt
    md5: a90f7cd96c78bb32037f7d53f4e44f6c
    size: 44787193
  - path: models/arch=resnet18_sz=256_fold=1.ckpt
    md5: 6b48bf222f4a67444615e48d02fc65f3
    size: 44787193
  - path: models/arch=resnet18_sz=256_fold=2.ckpt
    md5: b744500a91a2af01cbb0f955f1c3555f
    size: 44787193
  - path: models/arch=resnet18_sz=256_fold=3.ckpt
    md5: 8a6018657d4d944294718ed0e249be97
    size: 44787193
  - path: models/arch=resnet18_sz=256_fold=4.ckpt
    md5: 1ddfb3ee80d990a2e27845355c8265ab
    size: 44787193
  - path: subs/arch=resnet18_sz=256_fold=0.csv
    md5: 90c06f647ffcd6fe8adf8f2818dbde8b
    size: 993174
  - path: subs/arch=resnet18_sz=256_fold=1.csv
    md5: 57d8fffd5ffeac0233186d711bd0277f
    size: 994569
  - path: subs/arch=resnet18_sz=256_fold=2.csv
    md5: f541fb2734f23708a8286e5815431510
    size: 991653
  - path: subs/arch=resnet18_sz=256_fold=3.csv
    md5: e00bdbbe2748947126720a6fb5761fba
    size: 993150
  - path: subs/arch=resnet18_sz=256_fold=4.csv
    md5: d24589d03fac10bdbf9aeaf3c1d88587
    size: 994248
  - path: subs/oof/arch=resnet18_sz=256_fold=0.csv
    md5: 4f203721e2017a27fb3530b95824a59e
    size: 1678199
  - path: subs/oof/arch=resnet18_sz=256_fold=1.csv
    md5: 27e19c7055ca010230f0246ff0ae7bee
    size: 1679626
  - path: subs/oof/arch=resnet18_sz=256_fold=2.csv
    md5: 3773f15529ddeec8ac40cd07c82b5c85
    size: 1679875
  - path: subs/oof/arch=resnet18_sz=256_fold=3.csv
    md5: e6d4234aed69cc82c652943247385562
    size: 1680644
  - path: subs/oof/arch=resnet18_sz=256_fold=4.csv
    md5: c5c09c85224c872e85515e8cb8a87332
    size: 1678591
train_resnet18_512:
  cmd: python pipe/train.py --train_data train_512 --test_data test_512 --fold -1
    --epochs 15 --arch resnet18 --sz 512 --auto_batch_size power --lr 1 --sched onecycle
  deps:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
  - path: pipe/train.py
    md5: 97ab92d24da766cb621b43d4749ec8c8
    size: 7224
  outs:
  - path: metrics/arch=resnet18_sz=512.metric
    md5: 2310a59a6f2dbc8aa1b868287e705ad9
    size: 31
  - path: models/arch=resnet18_sz=512_fold=0.ckpt
    md5: 418b214287bd6bf8870f9dcfd6129fcd
    size: 44787201
  - path: models/arch=resnet18_sz=512_fold=1.ckpt
    md5: 7d75ff564bd3de5ce0d27b3dfec0bdcb
    size: 44787198
  - path: models/arch=resnet18_sz=512_fold=2.ckpt
    md5: 4c77426416a120568d28e83ca3b6b599
    size: 44787197
  - path: models/arch=resnet18_sz=512_fold=3.ckpt
    md5: 367b5fe5bd4ca0107421690d7fa60da2
    size: 44787197
  - path: models/arch=resnet18_sz=512_fold=4.ckpt
    md5: bd24dcb589fe3f1be741bb541415e161
    size: 44787198
  - path: subs/arch=resnet18_sz=512_fold=0.csv
    md5: 0a4cf03f080c057d3926f93f2bb85fe6
    size: 994293
  - path: subs/arch=resnet18_sz=512_fold=1.csv
    md5: 86063ba3f5fa844b40aef0c5259f8d54
    size: 995216
  - path: subs/arch=resnet18_sz=512_fold=2.csv
    md5: e8513a45c610331046faeb26eca41bed
    size: 992202
  - path: subs/arch=resnet18_sz=512_fold=3.csv
    md5: a2f83ff1d408e4884532037f8a7eeba6
    size: 997531
  - path: subs/arch=resnet18_sz=512_fold=4.csv
    md5: 51087d2261ec537608308ca6c9204445
    size: 998571
  - path: subs/oof/arch=resnet18_sz=512_fold=0.csv
    md5: 3d7d33ab2227347a65c5a7ad2214b25c
    size: 1678290
  - path: subs/oof/arch=resnet18_sz=512_fold=1.csv
    md5: 0f4d38917c582dda9f4136416f0d4918
    size: 1678835
  - path: subs/oof/arch=resnet18_sz=512_fold=2.csv
    md5: 6463e058c216c9c3d6f2f890398d5578
    size: 1678860
  - path: subs/oof/arch=resnet18_sz=512_fold=3.csv
    md5: 30b6300789b85f9cf8ce067ca905a696
    size: 1685707
  - path: subs/oof/arch=resnet18_sz=512_fold=4.csv
    md5: e80d686815502a81e952250535ca5d08
    size: 1683124
