download_data:
  cmd: kaggle competitions download -c ranzcr-clip-catheter-line-classification -p
    data/
  outs:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
unzip_train_img:
  cmd: unzip data/ranzcr-clip-catheter-line-classification.zip 'train/*' -d 'data/'
  deps:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
  outs:
  - path: data/train/
    md5: 5571d6d885d1e550ac890552afb255f0.dir
    size: 6912613778
    nfiles: 30083
unzip_test_img:
  cmd: unzip data/ranzcr-clip-catheter-line-classification.zip 'test/*' -d 'data/'
  deps:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
  outs:
  - path: data/test/
    md5: ac6babfae020e79d81c0cd2ed33b7bd6.dir
    size: 844745721
    nfiles: 3583
unzip_train_labels:
  cmd: unzip data/ranzcr-clip-catheter-line-classification.zip 'train.csv' -d 'data/'
  deps:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
  outs:
  - path: data/train.csv
    md5: f9305cb1f8dbb233c78385f20ab3ae72
    size: 2918266
unzip_train_annotations:
  cmd: unzip data/ranzcr-clip-catheter-line-classification.zip 'train_annotations.csv'
    -d 'data/'
  deps:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
  outs:
  - path: data/train_annotations.csv
    md5: 00ad55b088b2f81c756a6b21bc8f2562
    size: 4950273
create_folds:
  cmd: python pipe/create_folds.py
  deps:
  - path: data/train.csv
    md5: f9305cb1f8dbb233c78385f20ab3ae72
    size: 2918266
  - path: pipe/create_folds.py
    md5: 78d346827bae71e4e2057bf148f94038
    size: 723
  outs:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
unzip_sample_submission:
  cmd: unzip data/ranzcr-clip-catheter-line-classification.zip 'sample_submission.csv'
    -d 'data/'
  deps:
  - path: data/ranzcr-clip-catheter-line-classification.zip
    md5: f8a117e7ba1b5527c99c80b54beddeb5
    size: 12561354247
  outs:
  - path: data/sample_submission.csv
    md5: 3bf8eb33a1a25f1f79940d019c18ebbc
    size: 311839
resize_images:
  cmd: python pipe/resize_images.py
  deps:
  - path: data/test/
    md5: ac6babfae020e79d81c0cd2ed33b7bd6.dir
    size: 844745721
    nfiles: 3583
  - path: data/train/
    md5: 5571d6d885d1e550ac890552afb255f0.dir
    size: 6912613778
    nfiles: 30083
  outs:
  - path: data/test_1024/
    md5: 29b494965aebb0664b74e29f3e345473.dir
    size: 214944270
    nfiles: 3582
  - path: data/test_128/
    md5: 105566336a8298b416d0ef82e347051d.dir
    size: 8846772
    nfiles: 3582
  - path: data/test_192/
    md5: 7872b7646f388e9b08695138794c757a.dir
    size: 15818222
    nfiles: 3582
  - path: data/test_256/
    md5: 0a364a5a19354e2080a27411a6996ab5.dir
    size: 24363993
    nfiles: 3582
  - path: data/test_384/
    md5: 85def42fb4ea189dc50f2950f3b88965.dir
    size: 45232275
    nfiles: 3582
  - path: data/test_512/
    md5: 829fb8073ab10e5ace5d6d05253387b3.dir
    size: 70444379
    nfiles: 3582
  - path: data/test_768/
    md5: 9275cfb3acc8651983a9eb43ca03b174.dir
    size: 133274447
    nfiles: 3582
  - path: data/train_1024/
    md5: 2f49375e6e8e87e1fab5c5075d63b582.dir
    size: 1773270872
    nfiles: 30083
  - path: data/train_128/
    md5: 569de16f618eff737a4f2a8d3e70eec0.dir
    size: 72692224
    nfiles: 30083
  - path: data/train_192/
    md5: c480a05f5643a38909ccad7f71000599.dir
    size: 130326145
    nfiles: 30083
  - path: data/train_256/
    md5: e14002093f230017b4cc1810a53f0328.dir
    size: 201194414
    nfiles: 30083
  - path: data/train_384/
    md5: 142193318e2adfddd4fb6f8551589009.dir
    size: 374049179
    nfiles: 30083
  - path: data/train_512/
    md5: 088e837dc33da0b21e3f57644c085037.dir
    size: 582432616
    nfiles: 30083
  - path: data/train_768/
    md5: 8695f5a4249f99244a4c8c14e15eac0a.dir
    size: 1100286799
    nfiles: 30083
train_modlel_02:
  cmd: python pipe/train.py --fold 0 --epochs 20 --arch resnet34 --metric multilabel_auc_macro
    --opt adam --loss bce_with_logits --precision 16 --sz 128 --bs 512  --lr 0.02
    --wd 0.02 --mom 0.9
  deps:
  - path: data/train_folds.csv
    md5: c0a7355a820dd5f371ba3ffb54eeecd0
    size: 2978438
  - path: pipe/train.py
    md5: 07a367a146265f74db1e04c9d0a0d049
    size: 4289
  outs:
  - path: models/arch=resnet34_sz=128_fold=0.ckpt
    md5: 58672e048799379a17223652040325fd
    size: 85284057
  - path: subs/oof/arch=resnet34_sz=128_fold=0.csv
    md5: 125c6c3ae07a99c6d53e0830d10d2e2e
    size: 986208
train_resnet18_128:
  cmd: python pipe/train.py --train_data train_128 --test_data test_128 --fold -1
    --epochs 15 --arch resnet18 --sz 128 --batch_size 128 --lr 1 --sched onecycle
  deps:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
  - path: pipe/train.py
    md5: fc7d9341d469c245c7f7377b1ad0c911
    size: 7634
  outs:
  - path: metrics/arch=resnet18_sz=128.metric
    md5: fbbfdf2564246d5ad2fb0ef8ae488c0b
    size: 49
  - path: models/arch=resnet18_sz=128_fold=0.ckpt
    md5: 3b8868be2860239676a480bfa4b68964
    size: 44787577
  - path: models/arch=resnet18_sz=128_fold=1.ckpt
    md5: fc27124a1afad1a35c5a13a55ff6379d
    size: 44787577
  - path: models/arch=resnet18_sz=128_fold=2.ckpt
    md5: 630724680eea7f5436a8379f3a268c83
    size: 44787577
  - path: models/arch=resnet18_sz=128_fold=3.ckpt
    md5: c6563f9eadb1a26d0f228ec6be90a0c2
    size: 44787577
  - path: models/arch=resnet18_sz=128_fold=4.ckpt
    md5: 71df2a738fcb3fa57088f2b157fc5cda
    size: 44787577
  - path: subs/arch=resnet18_sz=128_fold=0.csv
    md5: 1314a4c913bbd7d83a7cbd762c158ae9
    size: 991719
  - path: subs/arch=resnet18_sz=128_fold=1.csv
    md5: 463fc0db18520683c97ae8051a3e11dd
    size: 991340
  - path: subs/arch=resnet18_sz=128_fold=2.csv
    md5: 5b480746b6d0adee52647cd7a84f9333
    size: 991948
  - path: subs/arch=resnet18_sz=128_fold=3.csv
    md5: 06f2458406e1f36da9e4a3db6db9bb07
    size: 991792
  - path: subs/arch=resnet18_sz=128_fold=4.csv
    md5: 7d149ec5d69169e3eb3ae8bf0c2ce709
    size: 992210
  - path: subs/oof/arch=resnet18_sz=128_fold=0.csv
    md5: e38fded3025f514b0652061675a029fa
    size: 1678521
  - path: subs/oof/arch=resnet18_sz=128_fold=1.csv
    md5: b9cd2de735762708e7b907cabeb70269
    size: 1676744
  - path: subs/oof/arch=resnet18_sz=128_fold=2.csv
    md5: adcc37477edbbe18b2c4942ad64ca088
    size: 1680466
  - path: subs/oof/arch=resnet18_sz=128_fold=3.csv
    md5: f0fa1edbed6c7e919f7fe629c3e7a3c8
    size: 1679932
  - path: subs/oof/arch=resnet18_sz=128_fold=4.csv
    md5: ca63a8a7513c9b87a300bddaed6adc6c
    size: 1675928
train_efficientnet_b4_128:
  cmd: python pipe/train.py --train_data train_128 --test_data test_128 --fold -1
    --epochs 15 --arch tf_efficientnet_b4_ns --sz 128 --batch_size 64 --lr 1 --sched
    onecycle
  deps:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
  - path: pipe/train.py
    md5: 2dfbac030cc5c89a17585ef832abdd7b
    size: 8159
  outs:
  - path: metrics/arch=tf_efficientnet_b4_ns_sz=128.metric
    md5: 437385f970aa5b8731838799e33f8e25
    size: 49
  - path: models/arch=tf_efficientnet_b4_ns_sz=128_fold=0.ckpt
    md5: 79be9c86427c4f08c789227a8e4a495c
    size: 71032001
  - path: models/arch=tf_efficientnet_b4_ns_sz=128_fold=1.ckpt
    md5: 55401609db9004b0f143477d57c62316
    size: 71032001
  - path: models/arch=tf_efficientnet_b4_ns_sz=128_fold=2.ckpt
    md5: 377211c6cabcc642ffebdf484febc3ca
    size: 71032001
  - path: models/arch=tf_efficientnet_b4_ns_sz=128_fold=3.ckpt
    md5: 8739960a79ef618fdc4c061e0a850e76
    size: 71032001
  - path: models/arch=tf_efficientnet_b4_ns_sz=128_fold=4.ckpt
    md5: 8e48f3eca40b08f0c68980dcbc3ca54d
    size: 71032001
  - path: subs/arch=tf_efficientnet_b4_ns_sz=128_fold=0.csv
    md5: d30b95b13361dcc85226e3592092568c
    size: 989865
  - path: subs/arch=tf_efficientnet_b4_ns_sz=128_fold=1.csv
    md5: 05b8bf97294b54c53c8cd36055e8b131
    size: 993194
  - path: subs/arch=tf_efficientnet_b4_ns_sz=128_fold=2.csv
    md5: bc548ec303e88a1f76e9a732e5acf034
    size: 990972
  - path: subs/arch=tf_efficientnet_b4_ns_sz=128_fold=3.csv
    md5: 1236b83d6f777f107699e8e8895d5ed1
    size: 991199
  - path: subs/arch=tf_efficientnet_b4_ns_sz=128_fold=4.csv
    md5: b563c4afe99bfa00638266d17e7ee137
    size: 991533
  - path: subs/oof/arch=tf_efficientnet_b4_ns_sz=128_fold=0.csv
    md5: efcf3dc4633f0099bec4904b5ba5ad28
    size: 1674420
  - path: subs/oof/arch=tf_efficientnet_b4_ns_sz=128_fold=1.csv
    md5: c8b3408e8fa47a3677c7563d721010bb
    size: 1676963
  - path: subs/oof/arch=tf_efficientnet_b4_ns_sz=128_fold=2.csv
    md5: b132fa30505e612f238f0887b63c304f
    size: 1677411
  - path: subs/oof/arch=tf_efficientnet_b4_ns_sz=128_fold=3.csv
    md5: 9b073256c4d4d04bd387e3b22f1d535a
    size: 1678125
  - path: subs/oof/arch=tf_efficientnet_b4_ns_sz=128_fold=4.csv
    md5: aaaf1c8789b9e5a3144392196b8a4789
    size: 1674484
train_resnet50_128:
  cmd: python pipe/train.py --train_data train_128 --test_data test_128 --fold -1
    --epochs 15 --arch resnet50 --sz 128 --batch_size 128 --lr 1 --sched onecycle
  deps:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
  - path: pipe/train.py
    md5: 97ab92d24da766cb621b43d4749ec8c8
    size: 7224
  outs:
  - path: metrics/arch=resnet50_sz=128.metric
    md5: da6d582c6b2da17664710616d2cb9448
    size: 31
  - path: models/arch=resnet50_sz=128_fold=0.ckpt
    md5: 188b2b5b71b0bea01647fed1cfd6ea48
    size: 94425647
  - path: models/arch=resnet50_sz=128_fold=1.ckpt
    md5: 36395c2386abf134a8aa451aaea0d0d0
    size: 94425647
  - path: models/arch=resnet50_sz=128_fold=2.ckpt
    md5: 108650a94d9f0060e212a615db46326f
    size: 94425647
  - path: models/arch=resnet50_sz=128_fold=3.ckpt
    md5: 5e3731c65b0c1e521f6f588e8862b8ab
    size: 94425647
  - path: models/arch=resnet50_sz=128_fold=4.ckpt
    md5: 62c3510d72653ce84d0c953f6f4ffedb
    size: 94425647
  - path: subs/arch=resnet50_sz=128_fold=0.csv
    md5: 3acf19864b39df060df0822d39960985
    size: 989700
  - path: subs/arch=resnet50_sz=128_fold=1.csv
    md5: 9a46b7aa3fc18481e782ff048274292a
    size: 991393
  - path: subs/arch=resnet50_sz=128_fold=2.csv
    md5: a1e1373655c38a6b6812fada44ad25a8
    size: 994491
  - path: subs/arch=resnet50_sz=128_fold=3.csv
    md5: 5ceedcc50163fafb20803aa800a1ae34
    size: 990590
  - path: subs/arch=resnet50_sz=128_fold=4.csv
    md5: 89c0433202169d6d65d7f2f54f7e032f
    size: 989975
  - path: subs/oof/arch=resnet50_sz=128_fold=0.csv
    md5: b07199dff5c31dad3a527c7c2a1dc643
    size: 1675007
  - path: subs/oof/arch=resnet50_sz=128_fold=1.csv
    md5: 5f9dd80e9a963c641cd3f98a66a1d15e
    size: 1677014
  - path: subs/oof/arch=resnet50_sz=128_fold=2.csv
    md5: 09eea9956ed72396961541a0b6b0ff92
    size: 1685322
  - path: subs/oof/arch=resnet50_sz=128_fold=3.csv
    md5: 987b516d46566943bf59ff1f04c2467c
    size: 1678375
  - path: subs/oof/arch=resnet50_sz=128_fold=4.csv
    md5: 30b3b45a9b2c0c2eb45428c1283d366f
    size: 1675072
train_resnet18_256:
  cmd: python pipe/train.py --train_data train_256 --test_data test_256 --fold -1
    --epochs 15 --arch resnet18 --sz 256 --batch_size 128 --lr 1 --sched onecycle
  deps:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
  - path: pipe/train.py
    md5: 97ab92d24da766cb621b43d4749ec8c8
    size: 7224
  outs:
  - path: metrics/arch=resnet18_sz=256.metric
    md5: 200784b2c007da87dad50f7d46c73b48
    size: 31
  - path: models/arch=resnet18_sz=256_fold=0.ckpt
    md5: a90f7cd96c78bb32037f7d53f4e44f6c
    size: 44787193
  - path: models/arch=resnet18_sz=256_fold=1.ckpt
    md5: 6b48bf222f4a67444615e48d02fc65f3
    size: 44787193
  - path: models/arch=resnet18_sz=256_fold=2.ckpt
    md5: b744500a91a2af01cbb0f955f1c3555f
    size: 44787193
  - path: models/arch=resnet18_sz=256_fold=3.ckpt
    md5: 8a6018657d4d944294718ed0e249be97
    size: 44787193
  - path: models/arch=resnet18_sz=256_fold=4.ckpt
    md5: 1ddfb3ee80d990a2e27845355c8265ab
    size: 44787193
  - path: subs/arch=resnet18_sz=256_fold=0.csv
    md5: 90c06f647ffcd6fe8adf8f2818dbde8b
    size: 993174
  - path: subs/arch=resnet18_sz=256_fold=1.csv
    md5: 57d8fffd5ffeac0233186d711bd0277f
    size: 994569
  - path: subs/arch=resnet18_sz=256_fold=2.csv
    md5: f541fb2734f23708a8286e5815431510
    size: 991653
  - path: subs/arch=resnet18_sz=256_fold=3.csv
    md5: e00bdbbe2748947126720a6fb5761fba
    size: 993150
  - path: subs/arch=resnet18_sz=256_fold=4.csv
    md5: d24589d03fac10bdbf9aeaf3c1d88587
    size: 994248
  - path: subs/oof/arch=resnet18_sz=256_fold=0.csv
    md5: 4f203721e2017a27fb3530b95824a59e
    size: 1678199
  - path: subs/oof/arch=resnet18_sz=256_fold=1.csv
    md5: 27e19c7055ca010230f0246ff0ae7bee
    size: 1679626
  - path: subs/oof/arch=resnet18_sz=256_fold=2.csv
    md5: 3773f15529ddeec8ac40cd07c82b5c85
    size: 1679875
  - path: subs/oof/arch=resnet18_sz=256_fold=3.csv
    md5: e6d4234aed69cc82c652943247385562
    size: 1680644
  - path: subs/oof/arch=resnet18_sz=256_fold=4.csv
    md5: c5c09c85224c872e85515e8cb8a87332
    size: 1678591
train_resnet18_512:
  cmd: python pipe/train.py --train_data train_512 --test_data test_512 --fold -1
    --epochs 15 --arch resnet18 --sz 512 --auto_batch_size power --lr 1 --sched onecycle
  deps:
  - path: data/train_folds.csv
    md5: 7a364fa00309d9d50641ae5edcfabcd3
    size: 2978438
  - path: pipe/train.py
    md5: 97ab92d24da766cb621b43d4749ec8c8
    size: 7224
  outs:
  - path: metrics/arch=resnet18_sz=512.metric
    md5: 2310a59a6f2dbc8aa1b868287e705ad9
    size: 31
  - path: models/arch=resnet18_sz=512_fold=0.ckpt
    md5: 418b214287bd6bf8870f9dcfd6129fcd
    size: 44787201
  - path: models/arch=resnet18_sz=512_fold=1.ckpt
    md5: 7d75ff564bd3de5ce0d27b3dfec0bdcb
    size: 44787198
  - path: models/arch=resnet18_sz=512_fold=2.ckpt
    md5: 4c77426416a120568d28e83ca3b6b599
    size: 44787197
  - path: models/arch=resnet18_sz=512_fold=3.ckpt
    md5: 367b5fe5bd4ca0107421690d7fa60da2
    size: 44787197
  - path: models/arch=resnet18_sz=512_fold=4.ckpt
    md5: bd24dcb589fe3f1be741bb541415e161
    size: 44787198
  - path: subs/arch=resnet18_sz=512_fold=0.csv
    md5: 0a4cf03f080c057d3926f93f2bb85fe6
    size: 994293
  - path: subs/arch=resnet18_sz=512_fold=1.csv
    md5: 86063ba3f5fa844b40aef0c5259f8d54
    size: 995216
  - path: subs/arch=resnet18_sz=512_fold=2.csv
    md5: e8513a45c610331046faeb26eca41bed
    size: 992202
  - path: subs/arch=resnet18_sz=512_fold=3.csv
    md5: a2f83ff1d408e4884532037f8a7eeba6
    size: 997531
  - path: subs/arch=resnet18_sz=512_fold=4.csv
    md5: 51087d2261ec537608308ca6c9204445
    size: 998571
  - path: subs/oof/arch=resnet18_sz=512_fold=0.csv
    md5: 3d7d33ab2227347a65c5a7ad2214b25c
    size: 1678290
  - path: subs/oof/arch=resnet18_sz=512_fold=1.csv
    md5: 0f4d38917c582dda9f4136416f0d4918
    size: 1678835
  - path: subs/oof/arch=resnet18_sz=512_fold=2.csv
    md5: 6463e058c216c9c3d6f2f890398d5578
    size: 1678860
  - path: subs/oof/arch=resnet18_sz=512_fold=3.csv
    md5: 30b6300789b85f9cf8ce067ca905a696
    size: 1685707
  - path: subs/oof/arch=resnet18_sz=512_fold=4.csv
    md5: e80d686815502a81e952250535ca5d08
    size: 1683124
